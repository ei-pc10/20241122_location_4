<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Location-based AR.js demo</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js'></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
    <style>
        #locationDisplay {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
            z-index: 1000;
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">
    <!-- 緯度・経度と距離の表示エリア -->
    <div id="locationDisplay">位置情報を取得中...</div>

    <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- 3Dモデルのエンティティ -->
        <a-entity id="modelEntity" 
                  gltf-model="https://<正しいURL>" 
                  gps-entity-place="latitude: 37.95623964531757; longitude: 139.3371717973987;"
                  position="0 -3 -3" 
                  scale="5 5 5"
                  look-at="[camera]"
                  visible="false"
                  animation-mixer>
        </a-entity>

        <!-- カメラと位置情報 -->
        <a-camera gps-camera="minDistance:5; maxDistance:50"></a-camera>
    </a-scene>

    <script>
        const modelEntity = document.getElementById('modelEntity');

        // 初期位置をカメラの前方に設定
        modelEntity.setAttribute('position', '0 0 -5');

        // 位置情報を取得し、動的な処理を追加する
        if ("geolocation" in navigator) {
            navigator.geolocation.watchPosition(function(position) {
                // デバッグ用に位置情報をコンソールに出力
                console.log(`モデルの初期位置を設定しました: ${modelEntity.getAttribute('position')}`);
            });
        } else {
            console.error("位置情報が利用できません。");
        }
    </script>
</body>
</html>
